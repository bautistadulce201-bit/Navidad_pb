<!DOCTYPE html>
<html lang="en">
<head>
    <title>Navidad</title>
    <link rel="icon" type="image/png" href="./image/f1.png"/> 
</head>
<body>
   
<canvas id="myCanvas"></canvas>

<script src="./font/01.js"></script>  
<script src="./font/02.js"></script>  
<script src="./font/03.js"></script> 

<script type="importmap">
{
"imports":{
"three": "./js/three.module.js",
"three/VRButton": "./js/VRButton.js"
}
}
</script>

<script type="module">

/* ---------------- IMPORTS ---------------- */
import * as THREE from 'three';
import { VRButton } from 'three/VRButton';
import {RoundedBoxGeometry} from "./js/RoundedBoxGeometry.js";
import duendes from "./objetos/duendes.js";
import muneco from "./objetos/muneco.js";
import arbol from "./objetos/arbol.js";
import bota from "./objetos/bota.js";
import {TextGeometry} from "./js/TextGeometry.js";
import {FontLoader} from "./js/FontLoader.js";

/* ---------------- RENDERER ---------------- */
var renderer = new THREE.WebGLRenderer({canvas:
document.getElementById('myCanvas'),antialias: true});
renderer.setPixelRatio(window.decivePixelRatio);
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setClearColor(0x85929E);
renderer.xr.enabled =
true;///////////////////////////////////////////////////////////// A√±adir estas Doslineas
renderer.xr.setReferenceSpaceType( 'local'
);/////////////////////////////////////////// Para habilitar el VR
document.body.appendChild( renderer.domElement
);///////////////////////////////////////// A√±adir estas Dos lineas
document.body.appendChild( VRButton.createButton( renderer )
);/////////////////////////// PAra habilitar el boton en el navegador
/* ---------------- ESCENA ---------------- */
var scene = new THREE.Scene();

/* ---------------- C√ÅMARA ---------------- */
var camera = new THREE.PerspectiveCamera(  70,window.innerWidth / window.innerHeight, 0.1,  2000);
scene.add(camera);
camera.position.set(0, 55, 800);

/* ---------------- RESIZE ---------------- */
var sizes = {
    width: window.innerWidth,
    height: window.innerHeight,
};
var canvas = document.getElementById('myCanvas');

window.addEventListener('resize', function(){
    sizes.width = window.innerWidth;
    sizes.height = window.innerHeight;

    camera.aspect = sizes.width / sizes.height;
    camera.updateProjectionMatrix();

    renderer.setSize(sizes.width, sizes.height);
});

/* ---------------- LUCES ---------------- */
var pl01 = new THREE.PointLight(0xF49DFA,10,40);
pl01.position.set(0,50,0);
scene.add(pl01);

renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFShadowMap;

var light = new THREE.DirectionalLight(0xffffff,100);
light.position.set(0,60,90);
light.target.position.set(0,30,0);

light.castShadow = true;
light.shadow.bias = 0.01;

light.shadow.mapSize.width = 512*3;
light.shadow.mapSize.height = 512*3;

light.shadow.camera.top = 20;
light.shadow.camera.bottom = -25;
light.shadow.camera.left = -25;
light.shadow.camera.right = 25;

scene.add(light);

/* ---------------- FONDO ---------------- */
var loader = new THREE.TextureLoader();
var bgTexture = loader.load('./image/fon.jpg');
scene.background = bgTexture;

/* ---------------- BASE ---------------- */
var geometry1 = new THREE.BoxGeometry(800,0.8,500);

var texture1 = new THREE.TextureLoader().load("./image/p3.jpg");
var material01 = new THREE.MeshBasicMaterial({map:texture1});

var mesh01 = new THREE.Mesh(geometry1, material01);
mesh01.position.set(0, 3, 0.3); 
mesh01.receiveShadow = true;

scene.add(mesh01);

/* ---------------- OBJETOS ---------------- */

// DUENDES
var escenario1 = duendes({x:0,y:0,z:0});
scene.add(escenario1);
escenario1.position.set(300,-86,-160);
escenario1.scale.set(8.5,8.5,8.5);

// MU√ëECO
var escenario2 = muneco({x:0,y:0,z:0});
scene.add(escenario2);
escenario2.position.set(290,-11,190);
escenario2.scale.set(0.8,0.8,0.8);

// √ÅRBOL
var escenario3 = arbol({x:0,y:0,z:0});
scene.add(escenario3);
escenario3.position.set(-290,-7,190);
escenario3.scale.set(1.3,1.3,1.3);

// BOTA
var escenario4 = bota({x:0,y:0,z:0});
scene.add(escenario4);
escenario4.position.set(-290,-75,-190);
escenario4.scale.set(10,10,10);
escenario4.rotation.y = 1.5;

/* ---------------- ANIMACI√ìN ---------------- */
//üé∞üé∞Rendering y animaci√≥n
function render (){
renderer.render(scene, camera);
//requestAnimationFrame(render);
}
renderer.setAnimationLoop( render );
</script>



</body>
</html>
